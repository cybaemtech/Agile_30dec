import React, { useState, useMemo } from 'react'; import { Users, Calendar, Search, X, ChevronLeft, ChevronRight } from 'lucide-react'; const ProjectTimelineView = () => { const [viewMode, setViewMode] = useState('quarter'); // 'month', 'quarter' or 'year' const [searchQuery, setSearchQuery] = useState(''); const [currentYearRange, setCurrentYearRange] = useState(2025); // Starting year for the view const projects = [ {  key: 'CYB002',  name: 'In-House Project 2',  status: 'PLANNING',  team: 'Product Team',  members: 12,  startDate: '2025-12-17',  endDate: '2026-03-17',  createdBy: 'AK akshay.navle@cybaemtech.com',  stats: { epics: 1, features: 0, stories: 0, tasks: 0, bugs: 0 } }, {  key: 'WBD',  name: 'Websites Designing',  status: 'ACTIVE',  team: 'Web Designing',  members: 2,  startDate: '2025-12-04',  endDate: '2026-02-04',  createdBy: 'PA payal.bharti@cybaemtech.com',  stats: { epics: 1, features: 1, stories: 1, tasks: 2, bugs: 0 } }, {  key: 'ASN',  name: 'ASN Consultants - HRMS',  status: 'ACTIVE',  team: 'HRMS - ASN',  members: 4,  startDate: '2025-11-19',  endDate: '2026-05-19',  createdBy: 'NI Nikhil.Sathe@cybaemtech.com',  stats: { epics: 1, features: 16, stories: 90, tasks: 54, bugs: 4 } }, {  key: 'CLD',  name: 'Cloud',  status: 'ACTIVE',  team: 'Cloud',  members: 3,  startDate: '2025-11-14',  endDate: '2026-02-14',  createdBy: 'PA payal.bharti@cybaemtech.com',  stats: { epics: 1, features: 1, stories: 1, tasks: 10, bugs: 3 } }, {  key: 'PIO',  name: 'Pioneer',  status: 'ACTIVE',  team: 'Pioneer',  members: 3,  startDate: '2025-11-12',  endDate: '2026-01-12',  createdBy: 'PA payal.bharti@cybaemtech.com',  stats: { epics: 2, features: 1, stories: 4, tasks: 0, bugs: 0 } }, {  key: 'TIM',  name: 'T-Imoexo',  status: 'ACTIVE',  team: 'T-Imoexo',  members: 3,  startDate: '2025-11-05',  endDate: '2026-04-05',  createdBy: 'PA payal.bharti@cybaemtech.com',  stats: { epics: 1, features: 2, stories: 7, tasks: 33, bugs: 12 } }, // NEW: Long-term projects spanning 3+ years {  key: 'ERP001',  name: 'Enterprise ERP System',  status: 'ACTIVE',  team: 'Enterprise Solutions',  members: 25,  startDate: '2024-01-15',  endDate: '2027-12-31',  createdBy: 'PA payal.bharti@cybaemtech.com',  stats: { epics: 45, features: 180, stories: 520, tasks: 890, bugs: 67 } }, {  key: 'DXP002',  name: 'Digital Transformation Platform',  status: 'ACTIVE',  team: 'Digital Innovation',  members: 18,  startDate: '2023-06-01',  endDate: '2027-03-31',  createdBy: 'AK akshay.navle@cybaemtech.com',  stats: { epics: 38, features: 145, stories: 420, tasks: 680, bugs: 52 } }, {  key: 'INF003',  name: 'Infrastructure Modernization',  status: 'ACTIVE',  team: 'Infrastructure',  members: 15,  startDate: '2024-03-01',  endDate: '2028-06-30',  createdBy: 'NI Nikhil.Sathe@cybaemtech.com',  stats: { epics: 32, features: 120, stories: 340, tasks: 550, bugs: 41 } }, {  key: 'AI004',  name: 'AI/ML Research Initiative',  status: 'PLANNING',  team: 'Research & Development',  members: 12,  startDate: '2025-09-01',  endDate: '2029-08-31',  createdBy: 'PA payal.bharti@cybaemtech.com',  stats: { epics: 28, features: 95, stories: 280, tasks: 450, bugs: 15 } } ]; // Filter projects based on search query const filteredProjects = useMemo(() => { if (!searchQuery.trim()) return projects; const query = searchQuery.toLowerCase(); return projects.filter(project =>   project.name.toLowerCase().includes(query) ||  project.key.toLowerCase().includes(query) ||  project.team.toLowerCase().includes(query) ||  project.status.toLowerCase().includes(query) ); }, [searchQuery]); // Generate months based on current year range const generateMonths = (startYear) => { const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']; return monthNames.map((name, idx) => ({  label: name,  year: startYear,  start: `${startYear}-${String(idx + 1).padStart(2, '0')}-01`,  end: `${startYear}-${String(idx + 1).padStart(2, '0')}-${new Date(startYear, idx + 1, 0).getDate()}` })); }; // Generate quarters based on current year range const generateQuarters = (startYear) => { return [ { label: `Q4 ${startYear}`, start: `${startYear}-10-01`, end: `${startYear}-12-31` }, { label: `Q1 ${startYear + 1}`, start: `${startYear + 1}-01-01`, end: `${startYear + 1}-03-31` }, { label: `Q2 ${startYear + 1}`, start: `${startYear + 1}-04-01`, end: `${startYear + 1}-06-30` }, { label: `Q3 ${startYear + 1}`, start: `${startYear + 1}-07-01`, end: `${startYear + 1}-09-30` } ]; }; // Generate year segments based on current year range const generateYearSegments = (startYear) => { return [ { label: `${startYear}`, months: 'Full Year', start: `${startYear}-01-01`, end: `${startYear}-12-31` }, { label: `${startYear + 1}`, months: 'Full Year', start: `${startYear + 1}-01-01`, end: `${startYear + 1}-12-31` }, { label: `${startYear + 2}`, months: 'Full Year', start: `${startYear + 2}-01-01`, end: `${startYear + 2}-12-31` } ]; }; const months = generateMonths(currentYearRange); const quarters = generateQuarters(currentYearRange); const yearSegments = generateYearSegments(currentYearRange); const getStatusColor = (status) => { switch (status) { case 'PLANNING': return 'bg-blue-100 text-blue-700 border-blue-300'; case 'ACTIVE': return 'bg-yellow-100 text-yellow-700 border-yellow-300'; default: return 'bg-gray-100 text-gray-700 border-gray-300'; } }; const getProgressColor = (status) => { switch (status) { case 'PLANNING': return 'bg-blue-500'; case 'ACTIVE': return 'bg-green-500'; default: return 'bg-gray-400'; } }; const calculatePosition = (startDate, endDate, mode) => { const start = new Date(startDate); const end = new Date(endDate); let timelineStart, timelineEnd; if (mode === 'month') {  timelineStart = new Date(`${currentYearRange}-01-01`);  timelineEnd = new Date(`${currentYearRange}-12-31`); } else if (mode === 'quarter') {  timelineStart = new Date(`${currentYearRange}-10-01`);  timelineEnd = new Date(`${currentYearRange + 1}-09-30`); } else {  timelineStart = new Date(`${currentYearRange}-01-01`);  timelineEnd = new Date(`${currentYearRange + 2}-12-31`); } const totalDays = (timelineEnd - timelineStart) / (1000 * 60 * 60 * 24); const startOffset = Math.max(0, (start - timelineStart) / (1000 * 60 * 60 * 24)); const endOffset = Math.min(totalDays, (end - timelineStart) / (1000 * 60 * 60 * 24)); const duration = endOffset - startOffset; const left = (startOffset / totalDays) * 100; const width = (duration / totalDays) * 100; // Check if project is visible in current view const isVisible = endOffset > 0 && startOffset < totalDays; return {  left: `${Math.max(0, left)}%`,  width: `${Math.max(0, Math.min(100 - left, width))}%`,  isVisible,  startsBeforeView: start < timelineStart,  endsAfterView: end > timelineEnd }; }; const getTotalWork = (stats) => { return stats.epics + stats.features + stats.stories + stats.tasks + stats.bugs; }; const clearSearch = () => { setSearchQuery(''); }; const navigateTimeline = (direction) => { if (direction === 'prev') { setCurrentYearRange(currentYearRange - 1); } else { setCurrentYearRange(currentYearRange + 1); } }; const getCurrentPeriods = () => { if (viewMode === 'month') return months; if (viewMode === 'quarter') return quarters; return yearSegments; }; const currentPeriods = getCurrentPeriods(); const getTimelineLabel = () => { if (viewMode === 'month') return `${currentYearRange}`; if (viewMode === 'quarter') return `${currentYearRange} - ${currentYearRange + 1}`; return `${currentYearRange} - ${currentYearRange + 2}`; }; // Get project duration in years const getProjectDuration = (startDate, endDate) => { const start = new Date(startDate); const end = new Date(endDate); const years = (end - start) / (1000 * 60 * 60 * 24 * 365); return years.toFixed(1); }; return ( <div className="w-full h-screen bg-gray-50 flex flex-col"> {/* Header */} <div className="bg-white border-b px-6 py-4"> <div className="flex justify-between items-center mb-4"> <div> <h1 className="text-2xl font-bold text-gray-900">Projects Timeline</h1> <p className="text-sm text-gray-600">Manage and monitor all your projects</p> </div> <button className="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center gap-2"> <span className="text-lg">+</span>  New Project </button> </div> {/* Search and Filters */} <div className="flex gap-4 items-center"> {/* Search Bar */} <div className="flex-1 max-w-md relative"> <Search className="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400" /> <input type="text" placeholder="Search projects by name, key, team, or status..." value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)} className="w-full pl-10 pr-10 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm" /> {searchQuery && ( <button onClick={clearSearch} className="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600" > <X className="w-4 h-4" /> </button> )} </div> {/* Filter Buttons */} <div className="flex gap-2"> <button className="px-3 py-2 text-sm border rounded-lg bg-white hover:bg-gray-50">All Status</button> <button className="px-3 py-2 text-sm border rounded-lg bg-white hover:bg-gray-50">All Teams</button> </div> {/* Timeline Navigation */} <div className="flex items-center gap-2 border rounded-lg bg-white px-2"> <button onClick={() => navigateTimeline('prev')} className="p-1 hover:bg-gray-100 rounded" > <ChevronLeft className="w-5 h-5 text-gray-600" /> </button> <span className="text-sm font-medium text-gray-700 px-2"> {getTimelineLabel()} </span> <button onClick={() => navigateTimeline('next')} className="p-1 hover:bg-gray-100 rounded" > <ChevronRight className="w-5 h-5 text-gray-600" /> </button> </div> {/* View Mode Dropdown */} <div className="relative"> <select value={viewMode} onChange={(e) => setViewMode(e.target.value)} className="px-4 py-2 text-sm font-medium border rounded-lg bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer appearance-none pr-10" > <option value="month">Month View</option> <option value="quarter">Quarter View</option> <option value="year">Year View</option> </select> <ChevronRight className="absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-600 rotate-90 pointer-events-none" /> </div> </div> {/* Search Results Info */} {searchQuery && ( <div className="mt-3 text-sm text-gray-600">  Found <span className="font-semibold">{filteredProjects.length}</span> project{filteredProjects.length !== 1 ? 's' : ''} matching "{searchQuery}" </div> )} </div> {/* Timeline Container */} <div className="flex-1 overflow-auto"> <div className="min-w-max"> {/* Timeline Header */} <div className="sticky top-0 bg-white border-b z-10"> <div className="flex"> <div className="w-80 border-r bg-gray-50 px-4 py-3 font-semibold text-sm text-gray-700">  Project Details </div> <div className="flex-1 flex"> {currentPeriods.map((period, idx) => ( <div key={idx} className={`flex-1 border-r px-2 py-3 text-center bg-gray-50 ${viewMode === 'month' ? 'min-w-20' : ''}`}> <div className="font-semibold text-sm text-gray-700">{period.label}</div> {period.months && viewMode !== 'month' && <div className="text-xs text-gray-500 mt-1">{period.months}</div>} {viewMode === 'month' && <div className="text-xs text-gray-500 mt-1">{period.year}</div>} </div> ))} </div> </div> </div> {/* Project Rows */} <div className="bg-white"> {filteredProjects.length === 0 ? ( <div className="flex flex-col items-center justify-center py-16 text-gray-500"> <Search className="w-12 h-12 mb-3 text-gray-300" /> <p className="text-lg font-medium">No projects found</p> <p className="text-sm">Try adjusting your search terms</p> </div> ) : (  filteredProjects.map((project, idx) => { const position = calculatePosition(project.startDate, project.endDate, viewMode); const duration = getProjectDuration(project.startDate, project.endDate); return ( <div key={idx} className="flex border-b hover:bg-gray-50 group"> {/* Project Info */} <div className="w-80 border-r px-4 py-4"> <div className="flex items-start gap-3"> <div className="flex-1 min-w-0"> <div className="flex items-center gap-2 mb-1"> <span className={`px-2 py-0.5 text-xs font-medium rounded border ${getStatusColor(project.status)}`}> {project.status} </span> <span className="text-xs text-gray-500 font-mono">{project.key}</span> </div> <h3 className="font-semibold text-sm text-gray-900 mb-1 truncate">{project.name}</h3> <div className="flex items-center gap-2 text-xs text-gray-600 mb-2"> <Users className="w-3 h-3" /> <span>{project.team}</span> <span className="text-gray-400">•</span> <span>{project.members} members</span> </div> <div className="flex gap-3 text-xs text-gray-600 mb-2"> <div><span className="font-medium">{project.stats.epics}</span> Epics</div> <div><span className="font-medium">{project.stats.features}</span> Features</div> <div><span className="font-medium">{project.stats.stories}</span> Stories</div> </div> {parseFloat(duration) > 2 && ( <div className="px-2 py-1 bg-purple-50 border border-purple-200 rounded text-xs text-purple-700 font-medium inline-block"> {duration} years </div> )} </div> </div> </div> {/* Timeline Bar */} <div className="flex-1 relative py-6 px-2"> {position.isVisible ? ( <div className="relative h-8"> {/* Grid lines */} <div className="absolute inset-0 flex"> {currentPeriods.map((_, idx) => ( <div key={idx} className="flex-1 border-r border-gray-100"></div> ))} </div> {/* Progress Bar */} <div className={`absolute h-8 ${getProgressColor(project.status)} rounded-lg shadow-sm group-hover:shadow-md transition-shadow cursor-pointer relative`} style={position} > {/* Continuation indicators */} {position.startsBeforeView && ( <div className="absolute left-0 top-0 bottom-0 w-3 bg-black bg-opacity-20 rounded-l-lg flex items-center justify-center"> <ChevronLeft className="w-3 h-3 text-white" /> </div> )} {position.endsAfterView && ( <div className="absolute right-0 top-0 bottom-0 w-3 bg-black bg-opacity-20 rounded-r-lg flex items-center justify-center"> <ChevronRight className="w-3 h-3 text-white" /> </div> )} <div className="absolute inset-0 flex items-center justify-between px-3 text-white text-xs font-medium"> <span className="truncate">{project.name}</span> <span className="ml-2 whitespace-nowrap">{getTotalWork(project.stats)} items</span> </div> </div> {/* Start/End Markers */} {!position.startsBeforeView && ( <div className="absolute top-0 bottom-0 w-px bg-gray-400" style={{ left: position.left }} ></div> )} {!position.endsAfterView && ( <div className="absolute top-0 bottom-0 w-px bg-gray-400" style={{   left: `calc(${position.left} + ${position.width})` }} ></div> )} {/* Date Labels */} <div className="flex items-center gap-2 mt-2 text-xs text-gray-500"> <Calendar className="w-3 h-3" /> <span>{new Date(project.startDate).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}</span> <span>→</span> <span>{new Date(project.endDate).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}</span> </div> </div> ) : ( <div className="relative h-8 flex items-center justify-center"> <span className="text-xs text-gray-400 italic">Not in current view range</span> </div> )} </div> </div> ); }) )} </div> </div> </div> {/* Legend */} <div className="bg-white border-t px-6 py-3"> <div className="flex items-center gap-6 text-sm flex-wrap"> <div className="flex items-center gap-4"> <span className="font-semibold text-gray-700">Status:</span> <div className="flex items-center gap-2"> <div className="w-4 h-4 bg-blue-500 rounded"></div> <span className="text-gray-600">Planning</span> </div> <div className="flex items-center gap-2"> <div className="w-4 h-4 bg-green-500 rounded"></div> <span className="text-gray-600">Active</span> </div> <div className="flex items-center gap-2"> <div className="w-4 h-4 bg-gray-400 rounded"></div> <span className="text-gray-600">Completed</span> </div> </div> <div className="flex items-center gap-4 ml-6"> <span className="font-semibold text-gray-700">Indicators:</span> <div className="flex items-center gap-2"> <ChevronLeft className="w-4 h-4 text-gray-600" /> <span className="text-gray-600">Continues from earlier</span> </div> <div className="flex items-center gap-2"> <ChevronRight className="w-4 h-4 text-gray-600" /> <span className="text-gray-600">Continues beyond</span> </div> </div> </div> </div> </div> ); }; export default ProjectTimelineView; 